(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{38:function(e,t,c){},64:function(e,t,c){"use strict";c.r(t);var n=c(2),o=c(14),i=c.n(o),a=c(15),s=(c(38),c(43)),r=c.n(s),u=c(41),d=c.n(u),l=c(79),j=c(19),b=(c(40),{apiKey:"AIzaSyAnipA5-nB3ir-xjYC_6z0z3bI6S6ch074",authDomain:"todo-app-21b75.firebaseapp.com",databaseURL:"https://todo-app-21b75-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"todo-app-21b75",storageBucket:"todo-app-21b75.appspot.com",messagingSenderId:"1000443677882",appId:"1:1000443677882:web:ba28a8c31086ed71370683"}),O={apiKey:b.apiKey,authDomain:b.authDomain,databaseURL:b.databaseURL,projectId:b.projectId,storageBucket:b.storageBucket,messagingSenderId:b.messagingSenderId,appId:b.appId};j.a.initializeApp(O);var m=j.a.firestore(),p=j.a.auth(),f=j.a.storage(),h=(j.a,c(5));function g(){var e=new Date,t=e.getHours(),c=e.getMinutes();return(t>9?t:"0"+t)+":"+(c>9?c:"0"+c)+(t>11?" pm":" am")}var x=function(e){var t=Object(n.useContext)(U),c=Object(n.useState)(e.todoObject.content),o=Object(a.a)(c,2),i=o[0],s=o[1],u=Object(n.useState)(e.todoObject.done),j=Object(a.a)(u,2),b=j[0],O=j[1],p=Object(n.useState)(!1),x=Object(a.a)(p,2),v=x[0],y=x[1],S=Object(n.useState)(!1),C=Object(a.a)(S,2),k=C[0],N=C[1];function I(e){N(1===e)}function D(){y(!1),m.collection(t.uid).doc(e.todoObject.id).update({content:i,time:g(),done:b}).then().catch((function(e){console.error("Error removing document: ",e)}))}return Object(n.useEffect)((function(){t&&D()}),[b]),Object(h.jsxs)("div",{className:"todo-item","data-key":e.todoObject.id,children:[Object(h.jsxs)("div",{children:["image"in e.todoObject&&e.todoObject.image&&Object(h.jsx)("img",{src:e.todoObject.image,alt:"",onClick:function(){I(1)}}),Object(h.jsx)(l.a,{open:k,onClose:function(){I(0)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(h.jsx)("div",{className:"modal-img-div",children:Object(h.jsx)("img",{src:e.todoObject.image,alt:""})})})]}),Object(h.jsxs)("div",{children:[v?Object(h.jsx)("div",{className:"edit-todo",children:Object(h.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),D()},children:[Object(h.jsx)("input",{type:"text",value:i,onChange:function(e){return s(e.target.value)}}),Object(h.jsx)("button",{children:"Update"})]})}):Object(h.jsx)("span",{style:b?{textDecoration:"line-through",opacity:"0.6"}:{},children:i}),!v&&Object(h.jsx)("input",{type:"checkbox",className:"icon",checked:b,onChange:function(){O(!b)}}),!v&&Object(h.jsx)(d.a,{className:"icon",onClick:function(){return y(!0)}}),Object(h.jsx)(r.a,{className:"icon",onClick:function(){m.collection(t.uid).doc(e.todoObject.id).delete().then().catch((function(e){console.error("Error removing document: ",e)})),"imageRef"in e.todoObject&&f.ref().child(e.todoObject.imageRef).delete().then((function(e){console.log("Deleted Successfully")})).catch((function(e){console.log("Error occures"+e)}))}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("span",{children:e.todoObject.time})})]})},v=new j.a.auth.GoogleAuthProvider;function y(){p.signInWithPopup(v).then((function(e){})).catch((function(e){console.log(e)}))}var S=function(){var e=Object(n.useContext)(U),t=Object(n.useContext)(A);return Object(h.jsx)("div",{className:"nav",children:e?Object(h.jsxs)("span",{className:"user",children:[Object(h.jsx)("h2",{children:e.username}),Object(h.jsx)("img",{src:e.userPhoto,alt:"",onClick:function(){p.signOut(),t(null)}})]}):Object(h.jsx)("button",{onClick:y,children:"Sign In"})})},C=c(26),k=c(44),N=c.n(k),I=c(45),D=c.n(I);function R(){var e=new Date,t=e.getHours(),c=e.getMinutes();return(t>9?t:"0"+t)+":"+(c>9?c:"0"+c)+(t>11?" pm":" am")}var w=function(){var e=Object(n.useState)({id:"",content:"",done:null,time:""}),t=Object(a.a)(e,2),c=t[0],o=t[1],i=Object(n.useContext)(U);function s(e){m.collection(i.uid).doc(e.id).set(e).then().catch((function(e){console.log("Error occured "+e)}))}return Object(h.jsx)("div",{className:"input-todo",children:Object(h.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),function(){if(""!==c.content){var e={id:Date.now().toString(),image:null,imageRef:"",content:c.content,done:!1,time:R()};o((function(e){return Object(C.a)(Object(C.a)({},e),{},{content:""})}));var t=document.querySelector(".file-choose");if(t.files[0]){var n=Date.now()+" - "+t.files[0].name,a={contentType:t.files[0].type},r=f.ref(),u="Images/"+i.username+i.uid+"/"+n;r.child(u).put(t.files[0],a).then((function(e){return e.ref.getDownloadURL()})).then((function(c){e.image=c,e.imageRef=u,t.value="",s(e)}))}else s(e);document.querySelector(".input-img").src=""}}()},children:[Object(h.jsx)("div",{children:Object(h.jsx)("img",{src:"",alt:"",className:"input-img"})}),Object(h.jsx)("div",{children:Object(h.jsx)("input",{type:"text",placeholder:"Add Todo Here...",value:c.content,onChange:function(e){o((function(t){return Object(C.a)(Object(C.a)({},t),{},{content:e.target.value})}))}})}),Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"file",accept:"image/*",className:"file-choose hidden",onChange:function(){var e=document.querySelector(".file-choose");e.files[0]&&(document.querySelector(".input-img").src=URL.createObjectURL(e.files[0]))}}),Object(h.jsx)(N.a,{className:"icon",onClick:function(){document.querySelector(".file-choose").click()}}),Object(h.jsx)("button",{className:"input-submit hidden",type:"submit"}),Object(h.jsx)(D.a,{className:"icon",onClick:function(){return document.querySelector(".input-submit").click()}})]})]})})},E=Object(n.createContext)(),P=Object(n.createContext)(),U=Object(n.createContext)(),A=Object(n.createContext)();var L=function(){var e=Object(n.useState)([]),t=Object(a.a)(e,2),c=t[0],o=t[1],i=Object(n.useState)(null),s=Object(a.a)(i,2),r=s[0],u=s[1];return Object(n.useEffect)((function(){r?m.collection(r.uid).onSnapshot((function(e){o(e.docs.map((function(e){return e.data()})).sort((function(e,t){return t.id-e.id})))})):o([])}),[r]),Object(n.useEffect)((function(){p.onAuthStateChanged((function(e){if(e){var t=e.displayName.split(" ")[0],c=e.photoURL;u({username:t,userPhoto:c,uid:e.uid})}else console.log("signed Out"),u(null)}))}),[]),Object(h.jsx)(U.Provider,{value:r,children:Object(h.jsx)(A.Provider,{value:u,children:Object(h.jsx)(E.Provider,{value:c,children:Object(h.jsx)(P.Provider,{value:o,children:Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)(S,{}),r&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(w,{}),Object(h.jsx)("div",{className:"show-todo",children:c.map((function(e){return Object(h.jsx)(x,{todoObject:e},e.id)}))})]})]})})})})})};i.a.render(Object(h.jsx)(L,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.342bd646.chunk.js.map