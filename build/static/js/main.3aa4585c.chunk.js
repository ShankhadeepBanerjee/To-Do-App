(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{19:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var c=n(2),o=n(15),a=n.n(o),i=n(12),r=(n(19),n(27)),s=n.n(r),u=n(25),d=n.n(u),j=n(13),b=(n(24),{apiKey:"AIzaSyAnipA5-nB3ir-xjYC_6z0z3bI6S6ch074",authDomain:"todo-app-21b75.firebaseapp.com",databaseURL:"https://todo-app-21b75-default-rtdb.asia-southeast1.firebasedatabase.app",projectId:"todo-app-21b75",storageBucket:"todo-app-21b75.appspot.com",messagingSenderId:"1000443677882",appId:"1:1000443677882:web:ba28a8c31086ed71370683"}),l={apiKey:b.apiKey,authDomain:b.authDomain,databaseURL:b.databaseURL,projectId:b.projectId,storageBucket:b.storageBucket,messagingSenderId:b.messagingSenderId,appId:b.appId};j.a.initializeApp(l);var p=j.a.firestore(),O=j.a.auth(),h=(j.a,n(5));function x(){var e=new Date,t=e.getHours(),n=e.getMinutes();return(t>9?t:"0"+t)+":"+(n>9?n:"0"+n)+(t>11?" pm":" am")}var f=function(e){var t=Object(c.useContext)(P),n=Object(c.useState)(e.todoObject.content),o=Object(i.a)(n,2),a=o[0],r=o[1],u=Object(c.useState)(e.todoObject.done),j=Object(i.a)(u,2),b=j[0],l=j[1],O=Object(c.useState)(!1),f=Object(i.a)(O,2),v=f[0],m=f[1];function g(){m(!1),p.collection(t.uid).doc(e.todoObject.id).update({content:a,time:x(),done:b}).then().catch((function(e){console.error("Error removing document: ",e)}))}return Object(c.useEffect)((function(){g()}),[b]),Object(h.jsxs)("div",{className:"todo-item","data-key":e.todoObject.id,children:[Object(h.jsxs)("div",{children:[v?Object(h.jsx)("div",{className:"edit-todo",children:Object(h.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault(),g()},children:[Object(h.jsx)("input",{type:"text",value:a,onChange:function(e){return r(e.target.value)}}),Object(h.jsx)("button",{children:"Update"})]})}):Object(h.jsx)("span",{style:b?{textDecoration:"line-through",opacity:"0.6"}:{},children:a}),!v&&Object(h.jsx)("input",{type:"checkbox",className:"btns",checked:b,onChange:function(){l(!b)}}),!v&&Object(h.jsx)(d.a,{className:"btns",onClick:function(){return m(!0)}}),Object(h.jsx)(s.a,{className:"btns",onClick:function(){p.collection(t.uid).doc(e.todoObject.id).delete().then().catch((function(e){console.error("Error removing document: ",e)}))}})]}),Object(h.jsx)("div",{children:Object(h.jsx)("span",{children:e.todoObject.time})})]})},v=new j.a.auth.GoogleAuthProvider;function m(){O.signInWithPopup(v).then((function(e){})).catch((function(e){console.log(e)}))}function g(){O.signOut()}var C=function(){var e=Object(c.useContext)(P);return Object(h.jsx)("div",{className:"nav",children:e?Object(h.jsxs)("span",{className:"user",children:[Object(h.jsx)("h2",{children:e.username}),Object(h.jsx)("img",{src:e.userPhoto,alt:"",onClick:g})]}):Object(h.jsx)("button",{onClick:m,children:"Sign In"})})};function S(){var e=new Date,t=e.getHours(),n=e.getMinutes();return(t>9?t:"0"+t)+":"+(n>9?n:"0"+n)+(t>11?" pm":" am")}var I=function(){var e=Object(c.useContext)(k),t=Object(c.useContext)(y),n=Object(c.useContext)(P);return Object(h.jsx)("div",{className:"input-todo",children:Object(h.jsxs)("form",{action:"",onSubmit:function(e){e.preventDefault()},children:[Object(h.jsx)("input",{type:"text",placeholder:"Add todo here",value:e,onChange:function(e){return t(e.target.value)}}),Object(h.jsx)("button",{onClick:function(){if(""!==e){var c={id:Date.now().toString(),content:e,done:!1,time:S()};p.collection(n.uid).doc(c.id).set(c).then().catch((function(e){console.log("Error occured "+e)})),t("")}},children:"ADD"})]})})},k=Object(c.createContext)(),y=Object(c.createContext)(),D=Object(c.createContext)(),N=Object(c.createContext)(),P=Object(c.createContext)(),w=Object(c.createContext)();var A=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],o=t[1],a=Object(c.useState)([]),r=Object(i.a)(a,2),s=r[0],u=r[1],d=Object(c.useState)(null),j=Object(i.a)(d,2),b=j[0],l=j[1];return Object(c.useEffect)((function(){b?p.collection(b.uid).onSnapshot((function(e){u(e.docs.map((function(e){return e.data()})).sort((function(e,t){return t.id-e.id})))})):u([])}),[b]),Object(c.useEffect)((function(){O.onAuthStateChanged((function(e){if(e){var t=e.displayName.split(" ")[0],n=e.photoURL;l({username:t,userPhoto:n,uid:e.uid})}else console.log("signed Out"),l(null)}))}),[]),Object(h.jsx)(k.Provider,{value:n,children:Object(h.jsx)(y.Provider,{value:o,children:Object(h.jsx)(P.Provider,{value:b,children:Object(h.jsx)(w.Provider,{value:l,children:Object(h.jsx)(D.Provider,{value:s,children:Object(h.jsx)(N.Provider,{value:u,children:Object(h.jsxs)("div",{className:"app",children:[Object(h.jsx)(C,{}),Object(h.jsx)(I,{}),Object(h.jsx)("div",{className:"show-todo",children:s.map((function(e){return Object(h.jsx)(f,{todoObject:e},e.id)}))})]})})})})})})})};a.a.render(Object(h.jsx)(A,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.3aa4585c.chunk.js.map